# 中文编程语言编译器

**作者：** 灵创-浪漫之夏  
**QQ群：** 624826263

## 项目简介

这是一个用Rust开发的中文编程语言编译器/解释器，旨在让中文用户能够使用中文关键字和语法进行编程，降低编程学习门槛，提高代码可读性。

## 功能特性

### 核心功能
- **中文关键字支持**：使用中文关键字如`如果`、`循环`、`函数`等
- **变量系统**：支持变量声明和赋值（`让`关键字）
- **数据类型**：支持数字、字符串、布尔值等基本数据类型
- **函数系统**：支持函数定义、参数传递和递归调用
- **控制流**：支持条件语句（`如果`/`否则`）、循环语句（`循环`、`当`、`对于`）
- **字符串操作**：支持字符串连接、转义字符处理
- **内置函数**：提供打印（`内置打印`）和输入（`内置输入`）功能

### 高级特性
- **作用域管理**：支持局部变量和函数作用域
- **递归支持**：完全支持函数递归调用
- **错误处理**：提供友好的错误提示信息
- **转义字符**：支持常见的转义序列如`\n`、`\t`、`\\`等
- **注释支持**：支持单行注释（`//`）

## 语法说明

### 变量声明和赋值
```cn
// 声明并初始化变量
让 年龄 = 25
让 姓名 = "张三"

// 变量赋值
年龄 = 26
```

### 基本数据类型
```cn
// 数字
让 数字 = 42
让 小数 = 3.14

// 字符串
让 文本 = "你好，世界！"
让 带换行的文本 = "第一行\n第二行"

// 布尔值
让 是真的 = true
让 是假的 = false
```

### 条件语句
```cn
让 分数 = 85

如果 分数 >= 90 {
    打印("优秀")
} 否则 如果 分数 >= 80 {
    打印("良好")
} 否则 如果 分数 >= 60 {
    打印("及格")
} 否则 {
    打印("不及格")
}
```

### 循环语句
```cn
// 当循环
让 计数器 = 0
当 计数器 < 5 {
    打印(计数器)
    计数器 = 计数器 + 1
}

// 对于循环
对于 i 在 1 到 5 {
    打印(i)
}

// 遍历字符串
让 文本 = "你好"
对于 字符 在 文本 {
    打印("字符: " + 字符)
}
```

### 函数定义和调用
```cn
// 定义函数
函数 打印问候(姓名) {
    打印("你好, " + 姓名 + "!")
}

// 调用函数
打印问候("张三")

// 带返回值的函数
function 计算阶乘(n) {
    如果 n <= 1 {
        返回 1
    }
    返回 n * 计算阶乘(n - 1)
}

让 结果 = 计算阶乘(5)
打印("5的阶乘是: " + 结果)
```

### 字符串操作
```cn
// 字符串连接
让 名字 = "张"
让 姓氏 = "三"
让 全名 = 名字 + 姓氏
打印(全名)  // 输出: 张三

// 字符串和数字连接
让 年龄 = 25
打印("年龄是: " + 年龄)  // 输出: 年龄是: 25
```

### 转义字符支持
```cn
打印("换行符测试\n第二行")
打印("制表符测试\t这里")
打印("引号测试\"引号内\"")
打印("反斜杠测试\\")
```

### 注释
```cn
// 这是单行注释

让 变量 = 42  // 行尾注释

/*
多行注释暂不支持
仅支持单行注释
*/
```

## 安装和使用

### 编译项目
```bash
cargo build
```

### 运行程序
```bash
# 编译后运行
./target/debug/cnlang 程序文件.cn

# 或者直接运行
cargo run -- 程序文件.cn
```

### 示例程序
项目包含多个示例程序，位于项目根目录：
- `示例.cn` - 综合示例，展示各种功能
- `test_basic.cn` - 基础语法测试
- `test_recursion.cn` - 递归函数测试
- `test_escape_chars.cn` - 转义字符测试

## 项目结构

```
├── src/
│   ├── main.rs          # 程序入口
│   ├── lexer.rs         # 词法分析器
│   ├── parser.rs        # 语法分析器
│   ├── ast.rs           # 抽象语法树定义
│   └── interpreter.rs   # 解释器
├── Cargo.toml           # 项目配置
├── README.md           # 项目说明
└── 示例.cn             # 示例程序
```

## 技术架构

### 编译流程
1. **词法分析**：将源代码转换为token序列
2. **语法分析**：将token序列构建为抽象语法树（AST）
3. **语义分析**：验证语法正确性和类型检查
4. **解释执行**：遍历AST并执行相应操作

### 核心组件

#### 词法分析器 (Lexer)
- 负责将源代码字符串转换为token序列
- 支持中文标识符和关键字识别
- 处理转义字符和注释

#### 语法分析器 (Parser)
- 将token序列构建为抽象语法树
- 支持表达式、语句、函数定义等语法结构
- 处理运算符优先级和结合性

#### 解释器 (Interpreter)
- 执行抽象语法树
- 管理变量作用域和环境
- 处理函数调用和递归

## 开发计划

### 已完成功能
- ✅ 基本词法分析
- ✅ 语法分析和AST构建
- ✅ 变量和作用域管理
- ✅ 函数定义和调用
- ✅ 递归支持
- ✅ 字符串操作
- ✅ 转义字符处理
- ✅ 注释支持
- ✅ 错误处理

### 计划中功能
- 🔄 数组数据类型
- 🔄 对象和结构体支持
- 🔄 模块系统
- 🔄 文件操作
- 🔄 网络编程支持
- 🔄 更丰富的内置函数库
- 🔄 性能优化
- 🔄 代码调试工具

## 常见问题

### Q: 为什么选择中文关键字？
A: 中文关键字可以让代码更易读，降低中文用户的编程学习门槛，特别适合编程初学者和中文母语者。

### Q: 支持哪些数据类型？
A: 目前支持数字（整数和浮点数）、字符串、布尔值。计划在未来版本中增加数组、对象等复合数据类型。

### Q: 如何贡献代码？
A: 欢迎提交Issue和Pull Request。请确保代码符合项目风格，并通过所有测试。

### Q: 遇到问题如何获取帮助？
A: 可以加入QQ群 624826263 获取技术支持和交流。

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 致谢

感谢所有为这个项目贡献代码和想法的开发者。特别感谢Rust语言社区提供的优秀工具和库。

---

**作者：** 灵创-浪漫之夏  
**QQ群：** 624826263  
**项目地址：** [GitHub Repository]